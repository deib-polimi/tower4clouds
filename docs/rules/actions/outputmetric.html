<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Tower 4Clouds</title>

    <link rel="stylesheet" href="http://deib-polimi.github.io/tower4clouds/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://deib-polimi.github.io/tower4clouds/css/highlight.dark.css">
    <link rel="stylesheet" href="http://deib-polimi.github.io/tower4clouds/css/main.css">
</head>
<body class="">

<header class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a href="http://deib-polimi.github.io/tower4clouds/" class="navbar-brand"><img src="http://deib-polimi.github.io/tower4clouds/img/logo-small.png" alt=""></a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse" id="navbar-main">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://deib-polimi.github.io/tower4clouds/">Home</a></li>
                <li><a href="http://deib-polimi.github.io/tower4clouds/docs/get-started.html">Get started</a></li>
                <li><a href="http://deib-polimi.github.io/tower4clouds/docs/">Documentation</a></li>
                                <li>
                    <a href="https://github.com/deib-polimi/tower4clouds">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                            </ul>
        </div>
    </div>
</header>


<main class="container-fluid">
    <div class="row">

        

        <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

            <ul class="nav nav-pills nav-stacked">
                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/">
                        Documentation Index
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/overview.html">
                        Overview
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/get-started.html">
                        Get started
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/mosaic-installation.html">
                        Installation on mOSAIC
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/data-collectors/">
                        Data Collectors
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/manager/">
                        Manager
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/data-analyzer/">
                        Data Analyzer
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/model/">
                        The Model
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/rules/">
                        Rules
                    </a>
                </li>
                                <ul class="submenu nav nav-stacked nav-pills">
                                        <li class="">
                        <a href="http://deib-polimi.github.io/tower4clouds/docs/rules/actions/">
                            Actions
                        </a>
                    </li>

                                        <ul class="submenu nav nav-stacked nav-pills">
                                                <li class="active">
                            <a href="http://deib-polimi.github.io/tower4clouds/docs/rules/actions/outputmetric.html">
                                Output Metric
                            </a>
                        </li>

                                                <ul class="submenu nav nav-stacked nav-pills">
                                                    </ul>
                        
                                                <li class="">
                            <a href="http://deib-polimi.github.io/tower4clouds/docs/rules/actions/restcall.html">
                                Rest Call
                            </a>
                        </li>

                        
                                                <li class="">
                            <a href="http://deib-polimi.github.io/tower4clouds/docs/rules/actions/cloudmlcall.html">
                                CloudML Call
                            </a>
                        </li>

                        
                                            </ul>
                    
                                    </ul>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/docs/observers/">
                        Observers
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/CHANGELOG.html">
                        Change log
                    </a>
                </li>
                                                <li class="">
                    <a href="http://deib-polimi.github.io/tower4clouds/CONTRIBUTING.html">
                        Contributing
                    </a>
                </li>
                                            </ul>

        </nav>

        
        <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
            <h1 id="output-metric">Output Metric</h1>
<p>The Output Metric action creates a new monitoring datum that is observable by <a href="../../observers">metrics observers</a>.</p>
<h2 id="parameters">Parameters</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Default value</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>resourceId</code></td>
<td><code>ID</code></td>
<td>the resource id that each monitoring datum should carry. Use the reserved string <code>ID</code> to let the platform automatically set the id of the resource the datum is about. E.g.: when groupingClass is VM, <code>ID</code> will be substituted with the id of the vm each aggregated monitoring datum is about.</td>
</tr>
<tr>
<td><code>metric</code></td>
<td></td>
<td>the name of the metric generated by the action.</td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>METRIC</code></td>
<td>the value that each monitoring datum should carry. Use the reserved string <code>METRIC</code> to let the platform automatically set either the raw value (in case no aggregation is specified) or the aggregated value.</td>
</tr>
</tbody>
</table>
<p>Please notice that all the parameters with a default value could be omitted when registering the rule.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-xml">&lt;monitoringRules
    xmlns="http://www.modaclouds.eu/xsd/1.0/monitoring_rules_schema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.modaclouds.eu/xsd/1.0/monitoring_rules_schema"&gt;
    &lt;monitoringRule timeWindow="30" timeStep="30" id="cpuRule"&gt;
        &lt;monitoredTargets&gt;
            &lt;monitoredTarget class="VM" type="Frontend" /&gt;
        &lt;/monitoredTargets&gt;
        &lt;collectedMetric metricName="CpuUtilization"&gt;
            &lt;parameter name="samplingProbability"&gt;1&lt;/parameter&gt;
            &lt;parameter name="samplingTime"&gt;10&lt;/parameter&gt;
        &lt;/collectedMetric&gt;
        &lt;metricAggregation aggregateFunction="Average"
            groupingClass="CloudProvider" /&gt;
        &lt;actions&gt;
            &lt;action name="OutputMetric"&gt;
                &lt;parameter name="metric"&gt;FrontendCPUUtilization&lt;/parameter&gt;
            &lt;/action&gt;
        &lt;/actions&gt;
    &lt;/monitoringRule&gt;
    &lt;monitoringRule timeWindow="30" timeStep="30" id="respTimeRule"&gt;
        &lt;monitoredTargets&gt;
            &lt;monitoredTarget class="Method" type="answerQuestions" /&gt;
            &lt;monitoredTarget class="Method" type="saveAnswers" /&gt;
            &lt;monitoredTarget class="Method" type="register" /&gt;
        &lt;/monitoredTargets&gt;
        &lt;collectedMetric metricName="ResponseTime"&gt;
            &lt;parameter name="samplingProbability"&gt;1&lt;/parameter&gt;
        &lt;/collectedMetric&gt;
        &lt;metricAggregation aggregateFunction="Average"/&gt;
        &lt;actions&gt;
            &lt;action name="OutputMetric"&gt;
                &lt;parameter name="metric"&gt;AverageRespTime&lt;/parameter&gt;
                &lt;parameter name="resourceId"&gt;AllMyFrontendMethods&lt;/parameter&gt;
            &lt;/action&gt;
        &lt;/actions&gt;
    &lt;/monitoringRule&gt;
    &lt;monitoringRule timeWindow="30" timeStep="30" id="respTimeRule2"&gt;
        &lt;monitoredTargets&gt;
            &lt;monitoredTarget class="Method" type="answerQuestions" /&gt;
            &lt;monitoredTarget class="Method" type="saveAnswers" /&gt;
            &lt;monitoredTarget class="Method" type="register" /&gt;
        &lt;/monitoredTargets&gt;
        &lt;collectedMetric metricName="ResponseTime"&gt;
            &lt;parameter name="samplingProbability"&gt;1&lt;/parameter&gt;
        &lt;/collectedMetric&gt;
        &lt;actions&gt;
            &lt;action name="OutputMetric"&gt;
                &lt;parameter name="metric"&gt;RespTime&lt;/parameter&gt;
            &lt;/action&gt;
        &lt;/actions&gt;
    &lt;/monitoringRule&gt;
&lt;/monitoringRules&gt;</code></pre>
<p>Note that the second rule does not specify any grouping class for the aggregation, therefore the aggregated monitoring datum will have the resource id that must be specified with the <code>resourceId</code> parameter. In the first case the <code>resourceId</code> of the aggregated monitoring data will be automatically set with the cloud provider id, which is the selected grouping class. In the third case, no aggregation is specified, every incoming monitoring datum will be sent to any attached observer without any aggregation.</p>
        </section>

    </div>
</main>



<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script src="http://yastatic.net/highlightjs/8.2/highlight.min.js"></script>

<script>
    $(function() {
        $("section>h1").wrap('<div class="page-header" />');
        // Syntax highlighting
        hljs.initHighlightingOnLoad();
    });
</script>


</body>
</html>
